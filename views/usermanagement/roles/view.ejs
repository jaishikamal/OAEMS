<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0"><i class="bi bi-tag"></i> <%- role.name %></h5>
                <a href="/usermanagement/roles" class="btn btn-sm btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back
                </a>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h6 class="text-muted">Code</h6>
                        <p class="mb-3"><code><%- role.code %></code></p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-muted">Status</h6>
                        <p class="mb-3">
                            <% if (role.status === 'active') { %>
                                <span class="badge bg-success">Active</span>
                            <% } else { %>
                                <span class="badge bg-secondary">Inactive</span>
                            <% } %>
                        </p>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-12">
                        <h6 class="text-muted">Description</h6>
                        <p class="mb-3"><%- role.description || 'No description' %></p>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <h6 class="text-muted">Type</h6>
                        <p class="mb-3">
                            <% if (role.isSystem) { %>
                                <span class="badge bg-info">System Role</span>
                            <% } else { %>
                                <span class="badge bg-warning">Custom Role</span>
                            <% } %>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-muted">Priority</h6>
                        <p class="mb-3"><%- role.priority || 'N/A' %></p>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-12">
                        <h6 class="text-muted">Created/Updated</h6>
                        <p class="mb-0">
                            Created: <%- new Date(role.createdAt).toLocaleString() %><br>
                            Updated: <%- new Date(role.updatedAt).toLocaleString() %>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card mb-3">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-lock"></i> Permissions (<%- role.permissions ? role.permissions.length : 0 %>)</h6>
            </div>
            <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                <% if (role.permissions && role.permissions.length > 0) { %>
                    <div class="list-group list-group-flush">
                        <% role.permissions.forEach(perm => { %>
                            <div class="list-group-item px-0 py-2">
                                <small>
                                    <strong><%- perm.name %></strong><br>
                                    <span class="text-muted"><%- perm.code %></span><br>
                                    <span class="badge bg-light text-dark"><%- perm.module %></span>
                                </small>
                            </div>
                        <% }); %>
                    </div>
                <% } else { %>
                    <p class="text-muted mb-0">No permissions assigned</p>
                <% } %>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-people"></i> Users (<%- role.users ? role.users.length : 0 %>)</h6>
            </div>
            <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                <% if (role.users && role.users.length > 0) { %>
                    <div class="list-group list-group-flush">
                        <% role.users.forEach(user => { %>
                            <a href="/usermanagement/users/<%- user.id %>/view" class="list-group-item list-group-item-action px-0 py-2">
                                <small>
                                    <strong><%- user.firstName %> <%- user.lastName %></strong><br>
                                    <span class="text-muted"><%- user.email %></span>
                                </small>
                            </a>
                        <% }); %>
                    </div>
                <% } else { %>
                    <p class="text-muted mb-0">No users assigned</p>
                <% } %>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-12">
        <% if (!role.isSystem) { %>
            <a href="/usermanagement/roles/<%- role.id %>/edit" class="btn btn-primary">
                <i class="bi bi-pencil"></i> Edit Role
            </a>
        <% } %>
    </div>
</div>
