<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="bi bi-diagram-3"></i> <%- branch.name %></h5>
        <a href="/usermanagement/branches" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back
        </a>
    </div>
    <div class="card-body">
        <div class="row mb-4">
            <div class="col-md-6">
                <h6 class="text-muted">Code</h6>
                <p class="mb-3"><code><%- branch.code %></code></p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted">Status</h6>
                <p class="mb-3">
                    <% if (branch.status === 'active') { %>
                        <span class="badge bg-success">Active</span>
                    <% } else { %>
                        <span class="badge bg-secondary">Inactive</span>
                    <% } %>
                </p>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <h6 class="text-muted">Level</h6>
                <p class="mb-3">
                    <% if (branch.level === 'head_office') { %>
                        <span class="badge bg-danger">Head Office</span>
                    <% } else if (branch.level === 'regional') { %>
                        <span class="badge bg-warning">Regional</span>
                    <% } else { %>
                        <span class="badge bg-info">Local</span>
                    <% } %>
                </p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted">Location</h6>
                <p class="mb-3"><%- branch.location %></p>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <h6 class="text-muted">Country</h6>
                <p class="mb-3"><%- branch.country %></p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted">City</h6>
                <p class="mb-3"><%- branch.city || '-' %></p>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <h6 class="text-muted">Phone</h6>
                <p class="mb-3"><%- branch.phone || '-' %></p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted">Email</h6>
                <p class="mb-3"><%- branch.email || '-' %></p>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <h6 class="text-muted">Address</h6>
                <p class="mb-3"><%- branch.address || '-' %></p>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <h6 class="text-muted">Manager</h6>
                <p class="mb-3"><%- branch.manager || '-' %></p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0"><i class="bi bi-people"></i> Users Assigned (<%- branch.users ? branch.users.length : 0 %>)</h6>
            </div>
            <div class="card-body">
                <% if (branch.users && branch.users.length > 0) { %>
                    <div class="list-group list-group-flush">
                        <% branch.users.forEach(user => { %>
                            <a href="/usermanagement/users/<%- user.id %>/view" class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <strong><%- user.firstName %> <%- user.lastName %></strong>
                                    <small><%- user.email %></small>
                                </div>
                            </a>
                        <% }); %>
                    </div>
                <% } else { %>
                    <p class="text-muted mb-0">No users assigned to this branch</p>
                <% } %>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">Actions</h6>
            </div>
            <div class="card-body">
                <a href="/usermanagement/branches/<%- branch.id %>/edit" class="btn btn-primary w-100 mb-2">
                    <i class="bi bi-pencil"></i> Edit Branch
                </a>
            </div>
        </div>
    </div>
</div>
